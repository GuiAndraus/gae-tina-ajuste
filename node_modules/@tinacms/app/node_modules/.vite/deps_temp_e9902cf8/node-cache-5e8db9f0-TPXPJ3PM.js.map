{
  "version": 3,
  "sources": ["browser-external:node:fs", "browser-external:node:path", "browser-external:node:os", "browser-external:node:crypto", "../../tinacms/dist/node-cache-5e8db9f0.mjs"],
  "sourcesContent": ["module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"node:fs\" has been externalized for browser compatibility. Cannot access \"node:fs.${key}\" in client code. See http://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"node:path\" has been externalized for browser compatibility. Cannot access \"node:path.${key}\" in client code. See http://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"node:os\" has been externalized for browser compatibility. Cannot access \"node:os.${key}\" in client code. See http://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"node:crypto\" has been externalized for browser compatibility. Cannot access \"node:crypto.${key}\" in client code. See http://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "const makeCacheDir = async (dir, fs, path, os) => {\r\n  const pathParts = dir.split(path.sep).filter(Boolean);\r\n  const cacheHash = pathParts[pathParts.length - 1];\r\n  const rootUser = pathParts[0];\r\n  let cacheDir = dir;\r\n  if (!fs.existsSync(path.join(path.sep, rootUser))) {\r\n    cacheDir = path.join(os.tmpdir(), cacheHash);\r\n  }\r\n  try {\r\n    fs.mkdirSync(cacheDir, { recursive: true });\r\n  } catch (error) {\r\n    throw new Error(`Failed to create cache directory: ${error.message}`);\r\n  }\r\n  return cacheDir;\r\n};\r\nconst NodeCache = async (dir) => {\r\n  const fs = require(\"node:fs\");\r\n  const path = require(\"node:path\");\r\n  const os = require(\"node:os\");\r\n  const { createHash } = require(\"node:crypto\");\r\n  const cacheDir = await makeCacheDir(dir, fs, path, os);\r\n  return {\r\n    makeKey: (key) => {\r\n      const input = key && key instanceof Object ? JSON.stringify(key) : key || \"\";\r\n      return createHash(\"sha256\").update(input).digest(\"hex\");\r\n    },\r\n    get: async (key) => {\r\n      let readValue;\r\n      const cacheFilename = `${cacheDir}/${key}`;\r\n      try {\r\n        const data = await fs.promises.readFile(cacheFilename, \"utf-8\");\r\n        readValue = JSON.parse(data);\r\n      } catch (e) {\r\n        if (e.code !== \"ENOENT\") {\r\n          console.error(\r\n            `Failed to read cache file to ${cacheFilename}: ${e.message}`\r\n          );\r\n        }\r\n      }\r\n      return readValue;\r\n    },\r\n    set: async (key, value) => {\r\n      const cacheFilename = `${cacheDir}/${key}`;\r\n      try {\r\n        await fs.promises.writeFile(cacheFilename, JSON.stringify(value), {\r\n          encoding: \"utf-8\",\r\n          flag: \"wx\"\r\n          // Don't overwrite existing caches\r\n        });\r\n      } catch (e) {\r\n        if (e.code !== \"EEXIST\") {\r\n          console.error(\r\n            `Failed to write cache file to ${cacheFilename}: ${e.message}`\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n};\r\nexport {\r\n  NodeCache,\r\n  makeCacheDir\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
